<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/font-awesome.css">

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">

    <!-- Your custom styles (optional) -->
    <link href="css/style.css" rel="stylesheet">

    <title>MBSR week 1</title>
    <meta name="description" content="MBSR week 1 page">
    <meta name="author" content="MBSR@ISTC">
    <script>var week = 1;</script>

    <!-- Include JS libraries -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/player_function.js"></script>
    <script src="js/checksController.js"></script>

    <!-- Check if user is logged; otherwise, go to login page -->
    <script>
        if (!checkLogin()) {
            window.location.href = 'index.html';
        }
    </script>
</head>

<body onload="check_boxes()" style="background: url('media/blue_wall.jpg') fixed center center">

    <!-- Hidden form for submit -->
    <form method="post" id="action_form" name="action_form" action="#">
        <input type="hidden" id="m_sent" name="m_sent" value="">
        <input type="hidden" id="m_id" name="m_id" value="">
        <input type="hidden" id="m_username" name="m_username" value="">
        <input type="hidden" id="m_action" name="m_action" value="">
        <input type="hidden" id="m_week" name="m_week" value="">
        <input type="hidden" id="m_day" name="m_day" value="">
        <input type="hidden" id="m_device" name="m_device" value="">
        <input type="hidden" id="m_date" name="m_date" value="">
        <input type="hidden" id="m_month" name="m_month" value="">
        <input type="hidden" id="m_year" name="m_year" value="">
        <input type="hidden" id="m_hour" name="m_hour" value="">
        <input type="hidden" id="m_min" name="m_min" value="">
        <input type="hidden" id="m_sec" name="m_sec" value="">
        <input type="hidden" id="m_timestring" name="m_timestring" value="">
        <input type="hidden" id="m_playingTrack" name="m_playingTrack" value="">
        <input type="hidden" id="m_progressTrack" name="m_progressTrack" value="">
    </form>

    <!-- Hidden button and text to log data -->
    <div hidden>
        <input type="text" id="log_text" />
        <button id="log_btn"></button>
    </div>

    <!-- Hidden player for audio tracks -->
    <audio id="trackBS" src="mbsr_tracks/body_scan.mp3" type="audio/mp3">Your browser does not support HTML5 audio.</audio>
    <audio id="trackBSprima" src="mbsr_tracks/body_scan_prima.mp3" type="audio/mp3">Your browser does not support HTML5
        audio.</audio>
    <audio id="trackMC" src="mbsr_tracks/mov_cons.mp3" type="audio/mp3">Your browser does not support HTML5 audio.</audio>
    <audio id="trackMR" src="mbsr_tracks/med_resp.mp3" type="audio/mp3">Your browser does not support HTML5 audio.</audio>
    <audio id="trackMS" src="mbsr_tracks/med_sed.mp3" type="audio/mp3">Your browser does not support HTML5 audio.</audio>
    <audio id="bell" src="mbsr_tracks/bell.mp3" type="audio/mp3">Your browser does not support HTML5 audio.</audio>

    <!-- Page setup -->
    <div class="container-fluid d-flex justify-content-center align-items-center">
        <div class="row d-flex justify-content-center">
            <div class="col">
                <p></p>
                <!-- Heading -->
                <h2 class="display-5 font-bold text-center white-text mb-2 animated fadeInDown">PRIMA SETTIMANA</h2><br>

                <!--Panel-->
                <div class="card animated fadeInLeft">
                    <h4 class="card-header primary-color white-text">Compiti giornalieri</h4>

                    <div class="card-body">

                        <div class="container">
                            <div class="row" id="row_act1">
                                <div class="col">
                                    <input type="checkbox" name="act1" id="act1" onclick="check_act(1);" autocomplete="off">
                                    Body scan<br>
                                    <ul class="fa-ul">
                                        <li><i class="fa-li fa fa-square"></i> Con introduzione (34 minuti)</li>
                                        <li>
                                            <div class="btn-group">
                                                <button class="btn btn-blue" id="btn_playBSprima" onclick="trackPlay('BSprima',document.getElementById('trackBSprima'))"><i
                                                        class="fa fa-play"></i></button>
                                                <button class="btn btn-yellow" id="btn_pauseBSprima" onclick="trackPause('BSprima',document.getElementById('trackBSprima'))"
                                                    disabled><i class="fa fa-pause"></i></button>
                                                <button class="btn btn-red" id="btn_stopBSprima" onclick="trackStop('BSprima',document.getElementById('trackBSprima'))"
                                                    disabled><i class="fa fa-stop"></i></button>
                                            </div>
                                        </li><br>

                                        <li><i class="fa-li fa fa-square"></i> Senza introduzione (30 minuti)</li>
                                        <li>
                                            <div class="btn-group">
                                                <button class="btn btn-blue" id="btn_playBS" onclick="trackPlay('BS',document.getElementById('trackBS'))"><i
                                                        class="fa fa-play"></i></button>
                                                <button class="btn btn-yellow" id="btn_pauseBS" onclick="trackPause('BS',document.getElementById('trackBS'))"
                                                    disabled><i class="fa fa-pause"></i></button>
                                                <button class="btn btn-red" id="btn_stopBS" onclick="trackStop('BS',document.getElementById('trackBS'))"
                                                    disabled><i class="fa fa-stop"></i></button>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <br>

                            <div class="row" id="row_act2">
                                <div class="col">
                                    <input type="checkbox" name="act2" id="act2" onclick="check_act(2);" autocomplete="off">
                                    Diario della pratica<p></p>
                                </div>
                            </div>

                            <div class="row" id="row_act3">
                                <div class="col">
                                    <input type="checkbox" name="act3" id="act3" onclick="check_act(3);" autocomplete="off">
                                    Esegui un’attività quotidiana in piena consapevolezza.<p></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--/.Panel-->

                <br>

                <!--Panel-->
                <div class="card animated fadeInLeft">
                    <h4 class="card-header primary-color white-text">Altre attività da fare entro il prossimo incontro</h4>
                    <div class="card-body">
                        <input type="checkbox" name="actw1" id="actw1" onclick="check_actweek(1);"> Lettura della
                        settimana<br>
                        <input type="checkbox" name="actw2" id="actw2" onclick="check_actweek(2);"> Un pasto
                        consapevole<br>
                        <input type="checkbox" name="actw3" id="actw3" onclick="check_actweek(3);"> Esercizio dei 9
                        punti<br>
                    </div>
                </div>
                <p></p>
                <!--/.Panel-->

                <!--Panel-->
                <div class="row">
                    <div class="col text-center">
                        <button type="button" class="btn btn-flat btn-lg" style="background-color: Transparent; background-repeat:no-repeat; border: none; cursor:pointer; overflow: hidden; outline:none;"
                            onclick="location.href='weeks.html'">
                            <i class="fa fa-home"></i> Home</button>
                    </div>
                    <div class="col text-center">
                        <button type="button" class="btn btn-flat btn-lg" style="background-color: Transparent; background-repeat:no-repeat; border: none; cursor:pointer; overflow: hidden; outline:none;"
                            onclick="functionLogout();">
                            <i class="fa fa-sign-out"></i> Logout</button>
                    </div>
                </div>
                <p><br></p>
                <!--/.Panel-->
            </div>
        </div>
    </div>

    <script>
        // Check which day of the week is the actual one
        var now = new Date();
        var weekStart = new Date(window.localStorage.getItem('mbsr_week_' + week));
        var weekday = Math.ceil((now.getTime() - weekStart.getTime()) / (1000 * 3600 * 24));

        // Set the log information
        document.getElementById("m_sent").value = "";
        document.getElementById("m_id").value = window.localStorage.getItem("id");
        document.getElementById("m_username").value = window.localStorage.getItem("username");
        document.getElementById("m_week").value = week.toString();
        document.getElementById("m_day").value = weekday;
        document.getElementById("m_device").value = "app";

        // Set player listener
        addListenerEnd("BS", document.getElementById("trackBS"), 1);
        addListenerEnd("BSprima", document.getElementById("trackBSprima"), 1);
        addListenerEnd("MC", document.getElementById("trackMC"), 1);
        addListenerEnd("MR", document.getElementById("trackMR"), 2);
        addListenerEnd("MS", document.getElementById("trackMS"), 1);
    </script>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/txtlog.js"></script>

</body>

</html>
